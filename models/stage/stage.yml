models:
  - name: stg_region
    description: "Staging table for regions information"
    columns:
      - name: region_id
        description: '{{ doc("primary_key" )}}'     
        tests: 
          - unique
          - not_null
          
      - name: name
        data_tests:
          - unique
          - not_null
          - accepted_values:
              arguments:
                values: ['AFRICA', 'AMERICA', 'ASIA']
                
                config:
                  store_failures: true
                  schema: error



  - name: stg_nations
    columns:
      - name: nation_id
        # ... other tests ...
        
      - name: region_id 
        tests:  
          - relationships:
              arguments: 
                to: ref('stg_region')
                field: region_id
              config:
                store_failures: true

  - name: stg_customers
    columns:
      - name: customer_id
        tests:
          - unique
          - not_null
          
      - name: nation_id
        description: '{{ doc("foreign_key" )}}' 
        tests:
          - relationships:
              arguments:
                to: ref('stg_nations')
                field: nation_id

  - name: stg_orders
    columns:
      - name: order_id
        data_tests:
          - unique
          - not_null
          
      - name: customer_id
        data_tests:
          - relationships:
              arguments:
                to: ref('stg_customers')
                field: customer_id

      # - name: order_priority
      #   data_tests:
      #     - accepted_values:
      #         arguments:
      #           value: ['1-URGENT', '2-HIGH', '3-MEDIUM', '4-NOT SPECIFIED', '5-LOW']

  - name: stg_lineitems
    description: "Staging table for line items information"
    columns:
      - name: order_line_id
        description: "Unique identifier for each line item"
        tests:
          - unique
          - not_null
          
      - name: order_item_id
        description: "surrogate key for line item"

seeds:
  - name: suppliers
    config:
      +alias: suppliers_name

        